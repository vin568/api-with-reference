components:
  schemas:
    User:
      type: object
      description: 用户基本信息
      properties:
        id:
          type: string
          description: 用户的唯一标识符
          pattern: '^[a-zA-Z0-9]{8,}$'
          example: "user12345"
        username:
          type: string
          description: 用户名
          minLength: 3
          maxLength: 50
          pattern: '^[a-zA-Z0-9_]+$'
          example: "john_doe"
        email:
          type: string
          description: 用户邮箱地址
          format: email
          example: "john.doe@example.com"
        status:
          type: string
          description: 用户状态
          enum: [active, inactive, suspended, pending]
          default: "active"
          example: "active"
        createdAt:
          type: string
          description: 用户创建时间
          format: date-time
          example: "2024-01-15T10:30:00Z"
        updatedAt:
          type: string
          description: 用户最后更新时间
          format: date-time
          example: "2024-01-20T14:45:00Z"
      required:
        - id
        - username
        - email
        - status
        - createdAt
        - updatedAt
      additionalProperties: false

    UserProfile:
      type: object
      description: 用户档案信息
      properties:
        firstName:
          type: string
          description: 用户名字
          minLength: 1
          maxLength: 50
          example: "John"
        lastName:
          type: string
          description: 用户姓氏
          minLength: 1
          maxLength: 50
          example: "Doe"
        avatar:
          type: string
          description: 用户头像URL
          format: uri
          example: "https://example.com/avatars/john.jpg"
        bio:
          type: string
          description: 用户个人简介
          maxLength: 500
          example: "热爱技术的软件工程师"
        phone:
          type: string
          description: 用户电话号码
          pattern: '^\+?[1-9]\d{1,14}$'
          example: "+8613800138000"
        dateOfBirth:
          type: string
          description: 用户出生日期
          format: date
          example: "1990-05-15"
        location:
          type: object
          description: 用户位置信息
          properties:
            country:
              type: string
              description: 国家
              example: "中国"
            city:
              type: string
              description: 城市
              example: "北京"
            timezone:
              type: string
              description: 时区
              example: "Asia/Shanghai"
          required:
            - country
            - city
      required:
        - firstName
        - lastName
      additionalProperties: false

    UserResponse:
      type: object
      description: 用户信息响应
      properties:
        success:
          type: boolean
          description: 请求是否成功
          example: true
        data:
          type: object
          description: 用户数据
          allOf:
            - $ref: '#/components/schemas/User'
            - type: object
              properties:
                profile:
                  $ref: '#/components/schemas/UserProfile'
                  description: 用户档案信息（可选）
      required:
        - success
        - data
      additionalProperties: false

    ErrorResponse:
      type: object
      description: 错误响应
      properties:
        success:
          type: boolean
          description: 请求是否成功
          example: false
        error:
          type: object
          description: 错误信息
          properties:
            code:
              type: string
              description: 错误代码
              example: "USER_NOT_FOUND"
            message:
              type: string
              description: 错误消息
              example: "指定的用户不存在"
            details:
              type: string
              description: 详细错误信息
              example: "用户ID user12345 在系统中未找到"
            timestamp:
              type: string
              description: 错误发生时间
              format: date-time
              example: "2024-01-20T15:30:00Z"
            requestId:
              type: string
              description: 请求ID，用于追踪
              example: "req_1234567890abcdef"
          required:
            - code
            - message
          additionalProperties: false
      required:
        - success
        - error
      additionalProperties: false

    PaginationInfo:
      type: object
      description: 分页信息
      properties:
        page:
          type: integer
          description: 当前页码
          minimum: 1
          example: 1
        pageSize:
          type: integer
          description: 每页大小
          minimum: 1
          maximum: 100
          example: 20
        total:
          type: integer
          description: 总记录数
          minimum: 0
          example: 150
        totalPages:
          type: integer
          description: 总页数
          minimum: 0
          example: 8
        hasNext:
          type: boolean
          description: 是否有下一页
          example: true
        hasPrev:
          type: boolean
          description: 是否有上一页
          example: false
      required:
        - page
        - pageSize
        - total
        - totalPages
        - hasNext
        - hasPrev
      additionalProperties: false
